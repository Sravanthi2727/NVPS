<!-- Filter and Search -->
<div class="admin-card">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3>Filters</h3>
        <button class="btn btn-primary" onclick="showAddUserModal()">
            <i class="fas fa-plus"></i> Add User
        </button>
    </div>
    <div class="row g-3">
        <div class="col-md-3">
            <select class="form-select" id="roleFilter">
                <option value="">All Roles</option>
                <option value="admin">Admin</option>
                <option value="customer">Customer</option>
                <option value="staff">Staff</option>
            </select>
        </div>
        <div class="col-md-3">
            <select class="form-select" id="statusFilter">
                <option value="">All Status</option>
                <option value="active">Active</option>
                <option value="inactive">Inactive</option>
                <option value="suspended">Suspended</option>
            </select>
        </div>
        <div class="col-md-3">
            <input type="date" class="form-control" id="dateFilter" placeholder="Filter by join date">
        </div>
        <div class="col-md-3">
            <input type="text" class="form-control" id="searchFilter" placeholder="Search by name or email">
        </div>
    </div>
</div>

<!-- Users Table -->
<div class="admin-card">
    <h3>Users</h3>
    <div class="admin-table">
        <table class="table table-dark">
            <thead>
                <tr>
                    <th>User ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Join Date</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% if (typeof users !== 'undefined' && users.length > 0) { %>
                    <% users.forEach(user => { %>
                    <tr>
                        <td data-label="ID">#<%= user.id.toString().padStart(4, '0') %></td>
                        <td data-label="Name">
                            <div class="user-info">
                                <div class="user-avatar">
                                    <%= user.name.charAt(0).toUpperCase() %>
                                </div>
                                <strong><%= user.name %></strong>
                            </div>
                        </td>
                        <td data-label="Email"><%= user.email %></td>
                        <td data-label="Role">
                            <span class="badge bg-<%= user.role === 'admin' ? 'danger' : user.role === 'staff' ? 'warning' : 'primary' %>">
                                <%= user.role.charAt(0).toUpperCase() + user.role.slice(1) %>
                            </span>
                        </td>
                        <td data-label="Join Date"><%= new Date(user.joinDate).toLocaleDateString() %></td>
                        <td data-label="Status">
                            <span class="badge bg-<%= user.status === 'active' ? 'success' : user.status === 'inactive' ? 'secondary' : 'danger' %>">
                                <%= user.status.charAt(0).toUpperCase() + user.status.slice(1) %>
                            </span>
                        </td>
                        <td data-label="Actions">
                            <div class="btn-group" role="group">
                                <button type="button" class="btn btn-sm btn-outline-primary" onclick="viewUser(<%= user.id %>)">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-primary" onclick="editUser(<%= user.id %>)">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    <% }); %>
                <% } else { %>
                    <tr>
                        <td colspan="7" class="text-center" style="color: #ccc; padding: 2rem;">
                            <i class="fas fa-users" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i><br>
                            No users found.<br>
                            <small>Users will appear here when they register.</small>
                        </td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>
</div>

<!-- User Details Modal -->
<div class="modal fade" id="userModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" style="background: #1a1a1a; border: 1px solid #d6a45a;">
            <div class="modal-header" style="border-bottom: 1px solid #333;">
                <h5 class="modal-title" style="color: #d6a45a;">User Details</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="userModalBody">
                <!-- User details will be loaded here -->
            </div>
            <div class="modal-footer" style="border-top: 1px solid #333;">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Add User Modal -->
<div class="modal fade" id="addUserModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content" style="background: #1a1a1a; border: 1px solid #d6a45a;">
            <div class="modal-header" style="border-bottom: 1px solid #333;">
                <h5 class="modal-title" style="color: #d6a45a;">Add New User</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <form>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="userName" class="form-label">Full Name</label>
                        <input type="text" class="form-control" id="userName" required>
                    </div>
                    <div class="mb-3">
                        <label for="userEmail" class="form-label">Email</label>
                        <input type="email" class="form-control" id="userEmail" required>
                    </div>
                    <div class="mb-3">
                        <label for="userRole" class="form-label">Role</label>
                        <select class="form-select" id="userRole" required>
                            <option value="">Select Role</option>
                            <option value="customer">Customer</option>
                            <option value="staff">Staff</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="userPassword" class="form-label">Temporary Password</label>
                        <input type="password" class="form-control" id="userPassword" required>
                    </div>
                </div>
                <div class="modal-footer" style="border-top: 1px solid #333;">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add User</button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
.user-info {
    display: flex !important;
    align-items: center !important;
    gap: 0.75rem !important;
}

.user-avatar {
    width: 40px !important;
    height: 40px !important;
    border-radius: 50% !important;
    background: #d6a45a !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    color: #000 !important;
    font-weight: 600 !important;
    font-size: 1.1rem !important;
}
</style>

<script>
function viewUser(userId) {
    // Mock user details - replace with actual API call
    const userDetails = `
        <div class="user-details">
            <div class="row">
                <div class="col-md-4 text-center">
                    <div class="user-avatar" style="width: 60px; height: 60px; font-size: 1.5rem; margin: 0 auto 1rem;">JD</div>
                    <h5>John Doe</h5>
                    <span class="badge bg-primary">Customer</span>
                </div>
                <div class="col-md-8">
                    <h6 style="color: #d6a45a;">Contact Information</h6>
                    <p><strong>Email:</strong> john@example.com<br>
                    <strong>Phone:</strong> +1 (555) 123-4567<br>
                    <strong>Join Date:</strong> January 1, 2024</p>
                    
                    <h6 style="color: #d6a45a;">Account Status</h6>
                    <p><strong>Status:</strong> <span class="badge bg-success">Active</span><br>
                    <strong>Last Login:</strong> January 8, 2024<br>
                    <strong>Total Orders:</strong> 15</p>
                    
                    <h6 style="color: #d6a45a;">Recent Activity</h6>
                    <ul class="list-unstyled">
                        <li>• Placed order #0012 - Jan 8, 2024</li>
                        <li>• Registered for workshop - Jan 7, 2024</li>
                        <li>• Updated profile - Jan 5, 2024</li>
                    </ul>
                </div>
            </div>
        </div>
    `;
    
    document.getElementById('userModalBody').innerHTML = userDetails;
    new bootstrap.Modal(document.getElementById('userModal')).show();
}

function editUser(userId) {
    // Implement edit user functionality
    alert('Edit user functionality would be implemented here');
}

function showAddUserModal() {
    new bootstrap.Modal(document.getElementById('addUserModal')).show();
}
</script>