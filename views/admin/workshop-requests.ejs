<!-- Workshop Requests Management -->
<div class="admin-container">
  <div class="admin-header">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <h1>Workshop Requests</h1>
        <p class="text-muted">Manage workshop bookings and schedules</p>
      </div>
      <a href="/admin" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left"></i> Back to Dashboard
      </a>
    </div>
  </div>

  <!-- Filter and Search -->
  <div class="admin-filters">
    <div class="row g-3">
      <div class="col-md-3">
        <select class="form-select" id="statusFilter">
          <option value="">All Status</option>
          <option value="pending">Pending</option>
          <option value="approved">Approved</option>
          <option value="rejected">Rejected</option>
          <option value="completed">Completed</option>
        </select>
      </div>
      <div class="col-md-3">
        <select class="form-select" id="workshopFilter">
          <option value="">All Workshops</option>
          <option value="Coffee Brewing Basics">Coffee Brewing Basics</option>
          <option value="Latte Art Masterclass">Latte Art Masterclass</option>
          <option value="Robusta Tasting">Robusta Tasting</option>
          <option value="Coffee Roasting">Coffee Roasting</option>
        </select>
      </div>
      <div class="col-md-3">
        <input type="date" class="form-control" id="dateFilter" placeholder="Filter by workshop date">
      </div>
      <div class="col-md-3">
        <input type="text" class="form-control" id="searchFilter" placeholder="Search by customer name">
      </div>
    </div>
  </div>

  <!-- Workshop Requests Table -->
  <div class="admin-section">
    <div class="admin-table-container">
      <table class="table admin-table">
        <thead>
          <tr>
            <th>Request ID</th>
            <th>Customer</th>
            <th>Workshop</th>
            <th>Date</th>
            <th>Participants</th>
            <th>Request Date</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% workshopRequests.forEach(request => { %>
          <tr>
            <td>#WS<%= request.id.toString().padStart(3, '0') %></td>
            <td>
              <div class="customer-info">
                <strong><%= request.customerName %></strong>
                <br>
                <small class="text-muted"><%= request.email %></small>
              </div>
            </td>
            <td>
              <div class="workshop-info">
                <strong><%= request.workshop %></strong>
              </div>
            </td>
            <td class="fw-bold"><%= new Date(request.date).toLocaleDateString() %></td>
            <td>
              <span class="badge bg-info"><%= request.participants %> person<%= request.participants > 1 ? 's' : '' %></span>
            </td>
            <td><%= new Date(request.requestDate).toLocaleDateString() %></td>
            <td>
              <span class="badge bg-<%= request.status === 'approved' ? 'success' : request.status === 'pending' ? 'warning' : request.status === 'rejected' ? 'danger' : 'secondary' %>">
                <%= request.status.charAt(0).toUpperCase() + request.status.slice(1) %>
              </span>
            </td>
            <td>
              <div class="btn-group" role="group">
                <button type="button" class="btn btn-sm btn-outline-primary" onclick="viewWorkshopRequest(<%= request.id %>)">
                  <i class="fas fa-eye"></i>
                </button>
                <div class="btn-group" role="group">
                  <button type="button" class="btn btn-sm btn-outline-success dropdown-toggle" data-bs-toggle="dropdown">
                    Update
                  </button>
                  <ul class="dropdown-menu">
                    <li>
                      <form method="POST" action="/admin/workshop-requests/<%= request.id %>/update" class="d-inline">
                        <input type="hidden" name="status" value="approved">
                        <button type="submit" class="dropdown-item">Approve Request</button>
                      </form>
                    </li>
                    <li>
                      <form method="POST" action="/admin/workshop-requests/<%= request.id %>/update" class="d-inline">
                        <input type="hidden" name="status" value="rejected">
                        <button type="submit" class="dropdown-item text-danger">Reject Request</button>
                      </form>
                    </li>
                    <li>
                      <form method="POST" action="/admin/workshop-requests/<%= request.id %>/update" class="d-inline">
                        <input type="hidden" name="status" value="completed">
                        <button type="submit" class="dropdown-item">Mark as Completed</button>
                      </form>
                    </li>
                  </ul>
                </div>
              </div>
            </td>
          </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Workshop Schedule Overview -->
  <div class="admin-section">
    <h2>Upcoming Workshops</h2>
    <div class="row g-3">
      <div class="col-md-6 col-lg-4">
        <div class="workshop-card">
          <div class="workshop-card-header">
            <h5>Coffee Brewing Basics</h5>
            <span class="badge bg-success">Available</span>
          </div>
          <div class="workshop-card-body">
            <p><i class="fas fa-calendar"></i> January 15, 2024</p>
            <p><i class="fas fa-clock"></i> 2:00 PM - 4:00 PM</p>
            <p><i class="fas fa-users"></i> 8/12 spots filled</p>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-lg-4">
        <div class="workshop-card">
          <div class="workshop-card-header">
            <h5>Latte Art Masterclass</h5>
            <span class="badge bg-warning">Almost Full</span>
          </div>
          <div class="workshop-card-body">
            <p><i class="fas fa-calendar"></i> January 20, 2024</p>
            <p><i class="fas fa-clock"></i> 10:00 AM - 12:00 PM</p>
            <p><i class="fas fa-users"></i> 9/10 spots filled</p>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-lg-4">
        <div class="workshop-card">
          <div class="workshop-card-header">
            <h5>Robusta Tasting</h5>
            <span class="badge bg-success">Available</span>
          </div>
          <div class="workshop-card-body">
            <p><i class="fas fa-calendar"></i> January 25, 2024</p>
            <p><i class="fas fa-clock"></i> 3:00 PM - 5:00 PM</p>
            <p><i class="fas fa-users"></i> 4/15 spots filled</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <nav aria-label="Workshop requests pagination">
    <ul class="pagination justify-content-center">
      <li class="page-item disabled">
        <a class="page-link" href="#" tabindex="-1">Previous</a>
      </li>
      <li class="page-item active"><a class="page-link" href="#">1</a></li>
      <li class="page-item"><a class="page-link" href="#">2</a></li>
      <li class="page-item">
        <a class="page-link" href="#">Next</a>
      </li>
    </ul>
  </nav>
</div>

<!-- Workshop Request Details Modal -->
<div class="modal fade" id="workshopModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Workshop Request Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" id="workshopModalBody">
        <!-- Workshop request details will be loaded here -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script>
function viewWorkshopRequest(requestId) {
  // Mock workshop request details - replace with actual API call
  const requestDetails = `
    <div class="workshop-request-details">
      <h6>Workshop Request #WS${requestId.toString().padStart(3, '0')}</h6>
      <div class="row">
        <div class="col-md-6">
          <strong>Customer Information:</strong>
          <p>Alice Johnson<br>alice@example.com<br>+1 (555) 987-6543</p>
        </div>
        <div class="col-md-6">
          <strong>Request Information:</strong>
          <p>Request Date: January 8, 2024<br>Status: Pending<br>Participants: 2 people</p>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <strong>Workshop Details:</strong>
          <p>Workshop: Coffee Brewing Basics<br>
          Preferred Date: January 15, 2024<br>
          Time: 2:00 PM - 4:00 PM<br>
          Duration: 2 hours</p>
        </div>
      </div>
      <strong>Special Requirements:</strong>
      <p>Vegetarian refreshments requested. One participant has mobility requirements.</p>
    </div>
  `;
  
  document.getElementById('workshopModalBody').innerHTML = requestDetails;
  new bootstrap.Modal(document.getElementById('workshopModal')).show();
}
</script>