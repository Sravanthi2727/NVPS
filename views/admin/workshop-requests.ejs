<!-- Workshop Requests Content -->
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <p style="color: #ccc;">Manage workshop bookings and proposals</p>
    </div>
</div>

<!-- Statistics Cards -->
<div class="row g-4 mb-4">
    <div class="col-md-6">
        <div class="admin-card">
            <h4><i class="fas fa-calendar-check me-2"></i>Workshop Bookings</h4>
            <div class="admin-card-number"><%= typeof workshopBookings !== 'undefined' ? workshopBookings.length : 0 %></div>
            <div class="admin-card-subtitle">Customer registrations</div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="admin-card">
            <h4><i class="fas fa-lightbulb me-2"></i>Workshop Proposals</h4>
            <div class="admin-card-number"><%= typeof workshopProposals !== 'undefined' ? workshopProposals.length : 0 %></div>
            <div class="admin-card-subtitle">Instructor proposals</div>
        </div>
    </div>
</div>

<!-- Workshop Bookings -->
<div class="admin-card mb-4">
    <h3 class="mb-3">Workshop Bookings</h3>
    <div class="admin-table">
        <table class="table table-dark">
            <thead>
                <tr>
                    <th>Participant</th>
                    <th>Workshop</th>
                    <th>Date</th>
                    <th>Contact</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% if (typeof workshopBookings !== 'undefined' && workshopBookings.length > 0) { %>
                    <% workshopBookings.forEach(booking => { %>
                        <tr>
                            <td>
                                <strong><%= booking.name %></strong><br>
                                <small style="color: #ccc;"><%= booking.email %></small>
                            </td>
                            <td><%= booking.title %></td>
                            <td><%= new Date(booking.date).toLocaleDateString() %></td>
                            <td><%= booking.phone %></td>
                            <td>
                                <span class="badge <%= booking.status === 'pending' ? 'bg-warning' : booking.status === 'approved' ? 'bg-success' : 'bg-danger' %>">
                                    <%= booking.status.charAt(0).toUpperCase() + booking.status.slice(1) %>
                                </span>
                            </td>
                            <td>
                                <form method="POST" action="/admin/workshop-requests/<%= booking.id %>/update" style="display: inline;">
                                    <select name="status" class="form-select form-select-sm bg-dark text-light border-secondary" style="width: auto; display: inline-block;" onchange="this.form.submit()">
                                        <option value="pending" <%= booking.status === 'pending' ? 'selected' : '' %>>Pending</option>
                                        <option value="approved" <%= booking.status === 'approved' ? 'selected' : '' %>>Approved</option>
                                        <option value="rejected" <%= booking.status === 'rejected' ? 'selected' : '' %>>Rejected</option>
                                        <option value="completed" <%= booking.status === 'completed' ? 'selected' : '' %>>Completed</option>
                                    </select>
                                </form>
                            </td>
                        </tr>
                    <% }); %>
                <% } else { %>
                    <tr>
                        <td colspan="6" class="text-center" style="color: #ccc;">No workshop bookings found</td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>
</div>

<!-- Workshop Proposals -->
<div class="admin-card">
    <h3 class="mb-3">Workshop Proposals</h3>
    <div class="admin-table">
        <table class="table table-dark">
            <thead>
                <tr>
                    <th>Organizer</th>
                    <th>Workshop Title</th>
                    <th>Category</th>
                    <th>Duration</th>
                    <th>Capacity</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% if (typeof workshopProposals !== 'undefined' && workshopProposals.length > 0) { %>
                    <% workshopProposals.forEach(proposal => { %>
                        <tr>
                            <td>
                                <strong><%= proposal.organizerName || proposal.name %></strong><br>
                                <small style="color: #ccc;"><%= proposal.email %></small>
                            </td>
                            <td><%= proposal.title %></td>
                            <td><%= proposal.category %></td>
                            <td><%= proposal.duration %></td>
                            <td><%= proposal.capacity %></td>
                            <td>
                                <span class="badge <%= proposal.status === 'pending' ? 'bg-warning' : proposal.status === 'approved' ? 'bg-success' : 'bg-danger' %>">
                                    <%= proposal.status.charAt(0).toUpperCase() + proposal.status.slice(1) %>
                                </span>
                            </td>
                            <td>
                                <form method="POST" action="/admin/workshop-requests/<%= proposal.id %>/update" style="display: inline;">
                                    <select name="status" class="form-select form-select-sm bg-dark text-light border-secondary" style="width: auto; display: inline-block;" onchange="this.form.submit()">
                                        <option value="pending" <%= proposal.status === 'pending' ? 'selected' : '' %>>Pending</option>
                                        <option value="approved" <%= proposal.status === 'approved' ? 'selected' : '' %>>Approved</option>
                                        <option value="rejected" <%= proposal.status === 'rejected' ? 'selected' : '' %>>Rejected</option>
                                    </select>
                                </form>
                                <button class="btn btn-outline-primary btn-sm ms-2" onclick="viewProposal('<%= proposal.id %>')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </td>
                        </tr>
                    <% }); %>
                <% } else { %>
                    <tr>
                        <td colspan="7" class="text-center" style="color: #ccc;">No workshop proposals found</td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>
</div>

<script>
function viewProposal(id) {
    // Add modal or detailed view functionality here
    alert('View proposal details for ID: ' + id);
}
</script>